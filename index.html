<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Regress√£o Log√≠stica</title>
    <meta charset="utf-8" />
    <meta name="author" content="Adriana Andrade" />
    <script src="index_files/header-attrs-2.9/header-attrs.js"></script>
    <link href="index_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="index_files/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <link href="index_files/remark-css-0.0.1/metropolis-fonts.css" rel="stylesheet" />
    <link href="index_files/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="index_files/tile-view-0.2.6/tile-view.js"></script>
    <script src="index_files/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="index_files/shareon-1.4.1/shareon.min.css" rel="stylesheet" />
    <script src="index_files/shareon-1.4.1/shareon.min.js"></script>
    <link href="index_files/xaringanExtra-shareagain-0.2.6/shareagain.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-shareagain-0.2.6/shareagain.js"></script>
    <script src="index_files/fabric-4.3.1/fabric.min.js"></script>
    <link href="index_files/xaringanExtra-scribble-0.0.1/scribble.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-scribble-0.0.1/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link href="index_files/panelset-0.2.6/panelset.css" rel="stylesheet" />
    <script src="index_files/panelset-0.2.6/panelset.js"></script>
    <link href="index_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="index_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="index_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
    <script src="index_files/htmlwidgets-1.5.3/htmlwidgets.js"></script>
    <script src="index_files/jquery-3.5.1/jquery.min.js"></script>
    <link href="index_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="index_files/datatables-binding-0.18/datatables.js"></script>
    <link href="index_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="index_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="index_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="index_files/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="index_files/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Regress√£o Log√≠stica
## Vis√£o Geral
### Adriana Andrade
### UFRRJ
### 2021/07/02

---

layout: true
&lt;div style="position: absolute;right:50px;top:11px;color:gray;"&gt;Adriana Andrade - UFRRJ&lt;/div&gt;





















---
background-image: url(https://gordoncstewart.files.wordpress.com/2016/01/to-be-or-not-to-be.jpg)
background-size: cover

---


#Regress√£o Log√≠stica


## Roteiro

- Propriedades do Modelo de Regress√£o Log√≠stica
- Testes utilizados nessa modelagem
- Interpreta√ß√£o dos resultados
- Aplica√ß√£o
- Pr√°tica


---
# Regress√£o Log√≠stica

## Aspectos Gerais do MRLog

O MRLog frequentemente √© utilizado para analisar dados observacionais ou experimentais de delineamentos inteiramente casualizados nos casos em que a vari√°vel resposta assume unicamente dois valores poss√≠veis.

--

Enquanto a vari√°vel resposta √© categ√≥rica com dois n√≠veis, as vari√°veis explicativas podem ser categ√≥ricas ou n√£o.

---
# Regress√£o Log√≠stica


## Perspectiva do MRLog

**Descritivo**: descrever a natureza do relacionamento entre a resposta m√©dia e as vari√°veis regressoras.

**Preditivo**: prever com base nas vari√°veis explicativas, a probabilidade de um elemento apresentar um dado desfecho.

---

#Regress√£o Log√≠stica


## Aplica√ß√µes do MRLog

- Identificar caracter√≠sticas associadas com a ocorr√™ncia de uma doen√ßa cr√¥nica;
- Identificar caracter√≠sticas associadas com um determinado status;
- Previs√£o do risco: calcular a probabilidade de consumidores serem inadimplentes ou adimplentes;
- Previs√£o de paciente aderir a um tratamento medicamentoso;
- Classificar: a empresa encontra-se no grupo de empresas solventes ou insolventes;
- Classificar e-mails em spam ou n√£o;


---
## Caracter√≠sticas do Modelo: Linear x Log√≠stico
.pull-left[
**Regress√£o Linear**
- Vari√°vel resposta: cont√≠nua
- M√≠nimo Quadrados
- Gr√°fico: Reta
- `\(E(Y) = \hat{y}\)`
]
.pull-right[

**Regress√£o Log√≠stica**
- Vari√°vel resposta: bin√°ria
- M√°xima Verossimilhan√ßa
- Gr√°fico: curva log√≠stica no formato da letra S
- `\(E(Y) = \hat{p}\)`

]
---

## Gr√°fico de Ajuste: Linear x Log√≠stico

.pull-left[

&lt;img src="index_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;

]
.pull-right[

&lt;img src="index_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

]


---
## Conte-me mais detalhes...

&lt;img src="https://media4.giphy.com/media/mlvseq9yvZhba/giphy.gif" width="70%" style="display: block; margin: auto;" /&gt;
---
# Regress√£o Log√≠stica

## Modelos Lineares Generalizados

O Modelo de Regress√£o Log√≠stica (MRLog) faz parte da classe dos Modelos Lineares Generalizados, em que a vari√°vel resposta Y pertence √† fam√≠lia exponencial. Nesses casos, a rela√ß√£o entre a vari√°vel resposta e as vari√°veis preditoras √© realizada por uma fun√ß√£o de liga√ß√£o. 

--

O objetivo dos Modelos Lineares Generalizados √© obter para uma vari√°vel resposta que n√£o possui distribui√ß√£o Normal uma rela√ß√£o linear nos par√¢metros das vari√°veis preditoras, ou seja, um preditor linear `\(\eta = \beta_0 +\beta_1X_{1i}\)`, a partir de uma fun√ß√£o de liga√ß√£o que relaciona a vari√°vel resposta com as vari√°veis preditoras.

--

A fun√ß√£o de liga√ß√£o utilizada no Modelo de Regress√£o Log√≠stica √© a fun√ß√£o logit.


---
# Regress√£o Log√≠stica


## Defini√ß√£o

Considere Yi uma v.a. Bernoulli 

`\(Y_i=0\)` ou `\(Y_i=1\)`

A distribui√ß√£o de probabilidade de `\(Y_i\)` √© dada por:

`\(Y_i = 1\)` =&gt; `\(P(Y_i=1) = p_i\)`

`\(Y_i = 0\)` =&gt; `\(P(Y_i=0) = 1 - p_i\)`

Temos que o valor esperado de `\(Y_i\)`:

`\(E(Y_i) = p_i\)`


---

# Regress√£o Log√≠stica


## Defini√ß√£o

- O MRLog modela uma probabilidade de ocorr√™ncia.

- A resposta m√©dia, quando a vari√°vel resposta √© uma vari√°vel bin√°ria (1 ou 0), sempre representa a probabilidade `\(p_i\)` para `\(Y=1\)` , dado o n√≠vel da vari√°vel preditora `\(X\)`. 

.center[ `$$m√©dia(Y) = E(Y)=P(Y=1|x)$$`]


---

# Regress√£o Log√≠stica

### Restri√ß√µes relacionadas com a vari√°vel resposta


**1) Valor predito √© uma probabilidade**

`\(0 \leq E(Y_i) = P(Y=1|x) \leq 1\)`

Tendo em vista que a vari√°vel resposta modela uma probabilade,tem-se que seus poss√≠veis valores estar√£o no intervalo [0;1], portanto, essa vari√°vel torna-se inapropriada para uma fun√ß√£o de resposta linear.

---

# Regress√£o Log√≠stica

### Restri√ß√µes relacionadas com a vari√°vel resposta


**2) Desfecho n√£o tem distribui√ß√£o Normal**


 Portanto, os erros n√£o tem distribui√ß√£o normal

`\(\epsilon_i = Y_i-(\hat{\beta}_0+\hat{\beta}_1X_{1i})\)`

Os erros ir√£o assumir dois valores:

`\(Y_i=1\)` =&gt; `\(\epsilon_i = 1-(\hat{\beta_0}+\hat{\beta}_1X_{1i})\)`


`\(Y_i=0\)` =&gt; `\(\epsilon_i = -(\hat{\beta_0}+\hat{\beta}_1X_{1i})\)`
---

# Regress√£o Log√≠stica

### Restri√ß√µes relacionadas com a vari√°vel resposta

**3) ùê∑ùëÉ(ùëå)‚àùùê∏(ùëå) ‚Äì Vari√¢ncia n√£o √© constante, viola√ß√£o da suposi√ß√£o de homocedasticidade**

`\(\epsilon_i = y_i - \hat{y_i} = y_i -\hat{p_i}\)`

`\(\sigma^2(\epsilon_i) = \hat{p}_i(1-\hat{p}_i) = (\hat{\beta}_0+\hat{\beta}_1X_{1i})(1-\hat{\beta}_0-\hat{\beta}_1X_{1i})\)`

 - A vari√¢ncia depende do valor de `\(X_i\)`

---
# Regress√£o Log√≠stica

##  Transforma√ß√£o Logit da probabilidade *p*


Tendo em vista que a vari√°vel resposta `\(Y\)` varia entre 0 e 1, ser√° definida uma transforma√ß√£o da vari√°vel resposta de modo que o seu dom√≠nio seja ampliado e que a rela√ß√£o entre a vari√°vel resposta e as vari√°veis explicativas seja representada por um preditor linear:

`$$\eta = \beta_0 +\beta_1X_{1i}$$`

Portanto, em raz√£o da n√£o linearidade da vari√°vel resposta, ser√° preciso definir uma quantidade que possibilite a liga√ß√£o entre `\(Y\)` e `\(\eta\)`:

Essa quantidade ser√° o **log(logit de p)**.

---
# Regress√£o Log√≠stica

## Transforma√ß√£o Logit da probabilidade *p*


A fun√ß√£o de liga√ß√£o ser√° estabelecida com a seguinte quantidade:

 .center[$$odds = \frac{p}{1-p}$$]

A **odds** (vantagem) √© a raz√£o entre a probabilidade de ocorr√™ncia e a probabilidade de n√£o-ocorr√™ncia do desfecho de interesse.

---

# Regress√£o Log√≠stica

## Transforma√ß√£o Logit da probabilidade *p*


O logit da vari√°vel resposta `\(Y\)` √© uma vari√°vel cont√≠nua que √© calculado como o logaritmo natural da vantagem (odds):

.center[$$ logit = ln(odds) =ln \left ( \frac{p}{1-p}  \right ) $$]
---
# Regress√£o Log√≠stica

### Fun√ß√£o de Liga√ß√£o Logit

A lineariza√ß√£o do preditor ocorre com o uso da quantidade **logit**.


$$ ln \left ( \frac{p}{1-p}  \right ) = \beta_0 + \beta_1X     $$
Aplicando o exponencial no logit, temos: 


$$ \hat{p_i}= \frac {e^{\beta_0 + \beta_1X}}{1 +e^{(\beta_0 + \beta_1X)}} = \frac {1}{1 +e^{-(\beta_0 + \beta_1X)}} $$

---
# Regress√£o Log√≠stica

### Probabilidade estimada

O MRLog estima a probabilidade de ocorr√™ncia de um evento.

`$$P(Y=1)= \frac {e^{\beta_0 + \beta_1X}}{1 +e^{(\beta_0 + \beta_1X)}} = \frac {1}{1 +e^{-(\beta_0 + \beta_1X)}}$$`

---

# Regress√£o Log√≠stica

## Suposi√ß√µes do Modelo de Regress√£o Log√≠stica


- Nenhuma vari√°vel importante foi omitida;
- Aus√™ncia de vari√°veis esp√∫rias;
- Vari√°veis independentes foram mensuradas corretamente;
- Aus√™ncia de  observa√ß√µes influentes;
- As observa√ß√µes s√£o independentes;
- As vari√°veis independentes n√£o s√£o combina√ß√µes lineares umas das outras. 


A n√£o observ√¢ncia dos resquisitos do modelo pode produzir estimativas de coeficientes enviesadas ou erros-padr√µes elevados, o que impossibilita a produ√ß√£o de infer√™ncias v√°lidas.


---
# Regress√£o Log√≠stica

##Estimador de M√°xima Verossimilhan√ßa


Busca a combina√ß√£o de coeficientes que maximiza a probabilidade da amostra ter sido observada. Sendo assim, procura obter par√¢metros que maximize a fun√ß√£o de verossimilhan√ßa (*L*).

.center[$$L=\prod_{i=1}^nf(x_i,\theta)$$]

A fun√ß√£o de verosimilhan√ßa √© uma medida da informa√ß√£o fornecida pelos dados para os par√¢metros de um modelo probabil√≠stico. Produz estimativas para os par√¢metros que tornam os dados amostrais mais prov√°veis.

---
# Regress√£o Log√≠stica

##Estimador de M√°xima Verossimilhan√ßa para o MRLog


A probabilidade de ocorr√™ncia de `\(Y_i\)` √© dada por:

`$$P(Y_i) = (p_i)^{Y_i}(1-p_i)^{1-Y_i}$$`


Com base nessa informa√ß√£o, √© definida a fun√ß√£o de verossimilhan√ßa:

`$$L=\prod_{i=1}^n(p_i)^{Y_i}(1-p_i)^{1-Y_i}$$`


 `$$L = \prod_{i=1}^n\left [  \left ( \frac{\epsilon^{\eta}}{(1+\epsilon^{\eta})} \right )^{Y_i}  \left ( \frac{1}{(1+\epsilon^{\eta})} \right )^{1-Y_i}  \right ]$$`

---
# Regress√£o Log√≠stica

##Estimador de M√°xima Verossimilhan√ßa para o MRLog

Por conveni√™ncia de c√°lculo, nesse ponto, aplica-se o logaritmo natural em ambos os lados da equa√ß√£o de verossimilhan√ßa:


 `\(LogL \sum_{i=1}^n \left \{ \left [Y_iln \left(\frac{e^{\eta}}{1+e^{\eta}} \right)  \right]  + \left [(1 - Y_i)ln \left(\frac{e^{\eta}}{1+e^{\eta}} \right)  \right]     \right \}\)`
 


---
# Regress√£o Log√≠stica

## Estima√ß√£o dos Coeficientes do Modelo

A signific√¢ncia estat√≠stica dos coeficientes estimados √© testada a partir da Estat√≠stica de *Wald*, que possui distribui√ß√£o Normal, com base no erro padr√£o dos coeficientes.

Hip√≥teses:

`\(H_0:\beta_j=0\)`

`\(H_1:\beta_j\neq0\)`


- **Estat√≠stica de Wald**

`\(Wald = \frac{\hat{\beta}_j}{se(\hat{\beta}_j)}~N(0,1)\)`

---
# Regress√£o Log√≠stica

## Intervalo de Confian√ßa para os par√¢metros

Um intervalo de confian√ßa `\((1-\alpha)\)` para `\(\beta_j\)` √© dado por

`\(\hat{\beta_j} \pm z_{\alpha/2}\hat{se(\beta_j)}\)`


---

# Regress√£o Log√≠stica

## Valores Preditos

O modelo de regress√£o log√≠sitca possibilita a obten√ß√£o de dos valores preditos, ou seja, √© poss√≠vel obter a probabilidade de ocorr√™ncia do desfecho de interesse condicionado √†s vari√°veis explicativas.


`$$\hat{p_i}= \frac {e^{\hat{\beta}_0 + \hat{\beta}_1X_i}}{1 +e^{(\hat{\beta}_0 + \hat{\beta}_1X_i)}} = \frac {1}{1 +e^{-(\hat{\beta}_0 + \hat{\beta}_1X_i)}}$$`
---

# Regress√£o Log√≠stica

## Interpreta√ß√£o - Efeito de `\(\hat{\beta_j}\)` no Logit



- A an√°lise direta do valor do coeficiente reporta o efeito no logaritmo da odds (logit).

- Um coeficiente significativo com sinal POSITIVO indica que a vari√°vel est√° associada com a AUMENTO do logit;

- Um coeficiente significativo com sinal NEGATIVO indica que a vari√°vel est√° associada com a DIMINUI√á√ÉO do logit;

---

# Regress√£o Log√≠stica  

### Interpreta√ß√£o - Efeito de `\(exp(\hat{\beta})\)` na OR


A odds ratio (OR) compara a probabilidade de ocorr√™ncia do evento de interesse para n√≠veis distintos de uma vari√°vel explicativa. 

 `$$OR=\frac{p_{A_1}/(1-p_{A_1})}{p_{A_2}/(1-p_{A_2})}$$`

Tendo em vista que o logit √© mensurado na escala logar√≠tmica, a exponencia√ß√£o do par√¢metro de regress√£o `\(\beta\)` fornece o efeito na OR:


|Quantidade|Interpreta√ß√£o|
|----------|-------------|
|$$exp(\hat{\beta})&gt;1$$  | aumento da OR|
|$$exp(\hat{\beta})&lt;1$$  | dimini√ß√£o da OR|
|$$[exp(\hat{\beta})-1]\times 100 = \%$$  | mudan√ßa percentual na OR|


---

# Regress√£o Log√≠stica

## Intervalo de Confian√ßa para OR

- Uma maneira de avaliar a relev√¢ncia dos coeficientes estimados √© pela an√°lise do intervalo de confian√ßa calculados para a OR (**odds ratio**). 


- Quando um intervalo conter o valor 1, n√£o se tem evid√™ncias suficientes para concluir que h√° uma vantagem de ocorr√™ncia do desfecho em rela√ß√£o a sua n√£o ocorr√™ncia com base na vari√°vel explicativa.


---

# Regress√£o Log√≠stica

## Adequa√ß√£o do Modelo - Estat√≠stica da Deviance 

A Estat√≠stica da Deviance verifica a adequa√ß√£o do ajuste ao comparar o logaritmo da verossimilhan√ßa do modelo de pesquisa com o logaritmo da verossimilhan√ßa do modelo saturado, modelo que se ajusta completamente aos dados, isto √©, para cada observa√ß√£o tem-se um par√¢metro. 

--

- Um modelo bem ajustado aos dados apresentar√° uma elevada verossimilhan√ßa e, portanto, uma estat√≠stica de Deviance pequena. 

- Para obter uma redu√ß√£o da Deviance, deve-se aumentar o n√∫mero de par√¢metros do modelo, o que deve ser realizado com cautela em raz√£o do princ√≠pio da parcim√¥nia.

---

# Regress√£o Log√≠stica

## Adequa√ß√£o do Modelo - Estat√≠stica da Deviance

A estat√≠stica da Deviance √© obtida a partir de:

Deviance = `\(-2log(L_{M.saturado} - L_{M.pesquisa}) ~\chi^{2}_{n-p}\)`


*Hip√≥tese*

`\(H_0\)`: Modelo de *pesquisa* √© t√£o adequado quanto ao modelo *Saturado*



---

#Regress√£o Log√≠stica

## Adequa√ß√£o do Modelo - Raz√£o de Verossimilhan√ßas

A Estat√≠stica da Raz√£o de Verossimilhan√ßas √© utilizada para comparar modelos aninhados, ou seja, um modelo reduzido que cont√©m um menor n√∫mero de par√¢metros contidos em um modelo mais  completo. Sendo assim, possibilita comparar o efeito da inclus√£o de termos na modelagem.



`\(\lambda\)` = 2(*Log_Verossimilhan√ßa Completo* - *Log_Verossimilhan√ßa M_Reduzido*) `\(~\chi_{(p-q)}^2\)`

onde `\(p\)` representa o n√∫mero de par√¢metros do *M_Completo* e `\(q\)` do *M_Reduzido*.


Hip√≥tese:

`\(H_0\)`: Modelo reduzido √© t√£o adquando quanto modelo completo.


---
# Regress√£o Log√≠stica

## Adequa√ß√£o do Ajuste - AIC (Akaike Information Criterion)


O AIC √© uma mediada obtida a partir do logaritmo da verossimilhan√ßa penalizado pelo n√∫mero de par√¢metros do modelo. Quanto menor o valor de AIC, melhor o ajuste do modelo. 

Primeiramente, √© calculado o AIC para o Modelo Nulo e em seguida se obt√©m o AIC para o Modelo de Pesquisa. Para a tomada de decis√£o, compara-se os dois valores de AIC calculados.


`\(AIC = -2 LogL+ 2p\)`

onde L represnta `\(f(x;\theta)\)`,a fun√ß√£o de verossimilhan√ßa do modelo, e `\(p\)` o n√∫mero de vari√°veis do modelo de pesquisa.
---
# Regress√£o Log√≠stica

## Adequa√ß√£o do Ajuste - Outros aspectos

### Multicolinearidade
Multicolinearidade  ocorre quando duas ou mais vari√°veis independentes do modelo apresentam algum n√≠vel de correla√ß√£o. Se h√° uma elevada multicolinariedade entre algumas vair√°veis, o ajuste do modelo pode apresentar coeficientes com erros padr√µes elevados.
Para avaliar a presen√ßa de multicolinearidade utilizar as medidas de *toler√¢ncia* e *VIF (variance inflation factor)*

### Observa√ß√µes influentes
A presen√ßa de observa√ß√µes influentes pode ocasionar estimativas de coeficientes viciadas.


---

# Regress√£o Log√≠stica

## Qualidade do Ajuste - Pseudo `\(R^2\)`


- O Pseudo `\(R^2\)` √© uma medida geral de como o modelo se ajusta aos dados.

- Essa medida √© semelhante ao `\(R^2\)` obtido na regress√£o linear m√∫ltipla que representa a quantidade de variabilidade explicada pelo modelo. 

--

- O pseudo R-quadrado n√£o √© medido em termos de vari√¢ncia, uma vez que na regress√£o log√≠stica a vari√¢ncia √© fixada como a vari√¢ncia da distribui√ß√£o log√≠stica padr√£o. √â uma propor√ß√£o em termos da probabilidade de log.

- O Pseudo `\(R^2\)` √© calculado a partir do logaritmo da verossimilhan√ßa do modelo nulo (contendo apenas o intercepto) e da verossimilhan√ßa do modelo pesquisa. Quanto maior a diferen√ßa entre essas duas quantidades, melhor a qualiade do ajuste.

--

`$$Pseudo\ R^2 = \frac{-2LogL_{M.nulo}-(-2ogLL_{M.pesquisa})}{-2LogL_{M.nulo}}$$`
---

# Regress√£o Log√≠stica

## Qualidade do Ajuste - Teste de Hosmer e Lemeshow

O teste de Hosmer e Lemeshow √© utilizado na avalia√ß√£o da qualidade do ajuste do modelo. O teste consiste em comparar a distribui√ß√£o dos valores previstos pelo modelo com os valores observados na amostra, tendo por refer√™ncia a distribi√ß√£o Qui-quadrado e a divis√£o dos valores sob teste em 10 grupos de igual tamanho. 

`\(H_0\)`: propor√ß√µes observadas e esperadas s√£o iguais =&gt; modelo bem ajustado.



---

# Regress√£o Log√≠stica

## Qualidade do Ajuste - Matriz de Confus√£o

Uma outra maneira de avaliar a qualidade do ajuste do MRLog √© obtida por uma tabela de classifica√ß√£o, denominada Matriz de Confus√£o. Essa tabela relaciona os valores observados na vari√°vel resposta com os valores preditos pelo modelo. 

--

Para esse fim, √© necess√°rio definir uma regra para classificar os valores preditos (as probabilidades) em uma vari√°vel dicot√¥mica que assumir√° o valor zero, caso a probabilidade de ocorr√™ncia for inferior ao limite estabelecido, ou 1 caso contr√°rio. Em geral, esse limite √© estabelecido em 0,5.



---
# Regress√£o Log√≠stica

## Qualiade do Ajuste -  Curva ROC

A Curva ROC (Receiver Operating Characteristic Curve) no contexto do modelo de regress√£o log√≠stica permite avaliar o potencial da capacidade preditiva do modelo estimado a partir da rela√ß√£o entre as medidas de sensibilidade (*verdadeiros positivos*) e de especificidade (*verdadeiros positivos*).


&lt;img src="libs/fig/fig_matrizconfusao.png" width="70%" style="display: block; margin: auto;" /&gt;
---

# Regress√£o Log√≠stica

## Qualidade do Ajuste -  Curva ROC

&lt;img src="libs/fig/ROC.jpg" width="70%" style="display: block; margin: auto;" /&gt;

---

# Regress√£o Log√≠stica

## Qualidade do Ajuste -  Curva ROC

A partir da √°rea definida sob a curva ROC, se define a medida AUC que quanto mais pr√≥ximo de 1 indica que o modelo fez uma excelente classifica√ß√£o. Quanto mais pr√≥ximo de 0,5 o valor da √°rea se aproximar, tem-se que o modelo realiza uma classifica√ß√£o aleat√≥ria. Valores acima de 0,7 s√£o aceit√°veis.


---
## Qualidade do Ajuste - Valida√ß√£o do Modelo

A an√°lise da qualidade da classifica√ß√£o √© realizada dividindo o conjunto de dados em dois:

 - uma parte para estima√ß√£o do modelo (treinamento)
 - outra parte para testar a efici√™ncia da classifica√ß√£o (classifica√ß√£o)

Para utilizar o modelo de regress√£o log√≠stica para classifica√ß√£o de dois grupos, utiliza-se o seguinte crit√©rio:

 se P(Y=1) &gt; 0,5 ent√£o classifica-se Y=1
 se P(Y=1) &lt; 0,5 ent√£o classifica-se Y=0
 
---
# Regress√£o Log√≠stica

## Nossa, que interessante!

 
&lt;img src="https://media1.giphy.com/media/Nm8ZPAGOwZUQM/giphy.gif" width="70%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Regress√£o Log√≠stica - Aplica√ß√£o

---

# Regress√£o Log√≠stica - Aplica√ß√£o


Camarano, A. A., Kanso, S., Mello, J. L., &amp; Andrade, A. (2006). Est√£o fazendo a transi√ß√£o os jovens que n√£o estudam, n√£o trabalham e n√£o procuram trabalho?. Transi√ß√£o para a vida adulta ou vida adulta em transi√ß√£o, 259-290.

&lt;img src="libs/fig/fig0.png" width="70%" style="display: block; margin: auto;" /&gt;

---
# Regress√£o Log√≠stica - Aplica√ß√£o


Ajuste de um Modelo de Regress√£o Log√≠stica para identificar o impacto de vari√°veis na desfecho de interesse: jovem n√£o estudar e nem trabalhar - *"nem nem"*.



| `\(Y=1\)`   |Jovem n√£o estuda e nem trabalha|
|:-------:|-------------------------------|
| `\(Y=0\)`   |Jovem estuda ou trabalha ou os dois|



Jovens: pessoas com idade entre 15 e 29 anos.


Dados: IBGE/Censo Demogr√°fico de 2000.

---
# Regress√£o Log√≠stica - Aplica√ß√£o

## Codifica√ß√£o das vari√°veis

&lt;img src="libs/fig/fig1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# Regress√£o Log√≠stica - Aplica√ß√£o

## Coeficientes estimados 


&lt;img src="libs/fig/fig2.png" width="70%" style="display: block; margin: auto;" /&gt;

--
Sinal dos Coeficientes
&lt;img src="libs/fig/fig3.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# Regress√£o Log√≠stica - Aplica√ß√£o

##Resultados - Probabilidades


&lt;img src="libs/fig/fig4.png" width="70%" style="display: block; margin: auto;" /&gt;

---
# Regress√£o Log√≠stica - Aplica√ß√£o

##Resultados - Probabilidades


&lt;img src="libs/fig/fig5.png" width="70%" style="display: block; margin: auto;" /&gt;

---
# Regress√£o Log√≠stica

## Que tal ajustarmos um modelo?
 
&lt;img src="https://media3.giphy.com/media/CjmvTCZf2U3p09Cn0h/giphy-downsized.gif" width="70%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Regress√£o Log√≠stica - Exerc√≠cio


---
# MRLog - Exerc√≠cio

## Ajuste MRLog no R

**Fun√ß√£o glm** ‚Äì utilizada para ajustar modelos lineares generalizados e obter estimativas pontuais para os par√¢metros e algumas medidas de qualidade de ajuste.

Especificar:

- Vari√°vel dependente
- Vari√°veis explicativas
- Family - a distribui√ß√£o de probabilidade da vari√°vel resposta do modelo
- Link ‚Äì fun√ß√£o de liga√ß√£o

As estat√≠sticas de adequa√ß√£o e diagn√≥stico ser√£o obtidas pelo pacote **blorr**.

---
# MRLog - Exerc√≠cio

## Data Titanic

Data sobre o Titanic, navio constru√≠do na Irlanda que naufragou quatro dias ap√≥s sua viagem inaugural, em 1912. Quando constru√≠do, o navio prometia ser o mais luxuoso e seguro de sua √©poca. Entretanto, estudos posteriores indicaram falhas no sistema de seguran√ßa e evacua√ß√£o. A estimativa √© de 1514 mortes entre os 2224 passageiros, ou seja, aproximadamente 68% da tripula√ß√£o.

---

# MRLog - Exerc√≠cio

.panelset[
.panel[.panel-name[R Code]

```r
#install.packages("titanic")
library(titanic)
data&lt;-titanic_train
```
]

.panel[.panel-name[Data]


```
'data.frame':	891 obs. of  12 variables:
 $ PassengerId: int  1 2 3 4 5 6 7 8 9 10 ...
 $ Survived   : int  0 1 1 1 0 0 0 0 1 1 ...
 $ Pclass     : int  3 1 3 1 3 3 1 3 3 2 ...
 $ Name       : chr  "Braund, Mr. Owen Harris" "Cumings, Mrs. John Bradley (Florence Briggs Thayer)" "Heikkinen, Miss. Laina" "Futrelle, Mrs. Jacques Heath (Lily May Peel)" ...
 $ Sex        : chr  "male" "female" "female" "female" ...
 $ Age        : num  22 38 26 35 35 NA 54 2 27 14 ...
 $ SibSp      : int  1 1 0 1 0 0 0 3 0 1 ...
 $ Parch      : int  0 0 0 0 0 0 0 1 2 0 ...
 $ Ticket     : chr  "A/5 21171" "PC 17599" "STON/O2. 3101282" "113803" ...
 $ Fare       : num  7.25 71.28 7.92 53.1 8.05 ...
 $ Cabin      : chr  "" "C85" "" "C123" ...
 $ Embarked   : chr  "S" "C" "S" "S" ...
```
]
]

---
# MRLog - Exerc√≠cio

**Parametriza√ß√£o do modelo**



|Vari√°vel | Nome | Defini√ß√£o | Categoria de base|
|---------|:----:|:----------|:----------------:|
| Sexo    | Sex  | Fem x Masc|  Masculino |
| Classe de embarque| Pclass |1¬™,2¬™,3¬™ | 3¬™|
| Idade   | Age  | anos - cont√≠nua| -|

---
# MRLog - Exerc√≠cio


```r
#Remo√ß√£o de missing values
data&lt;-data[complete.cases(data),]


#Recodifica√ß√£o da vari√°vel Survived
data$Survived&lt;-factor(data$Survived,
                      labels = c("Not survived","Survived"),
                      levels = c(0,1))


#Recodifica√ß√£o da Vari√°vel Sexo para factor
#Categoria de base: male
data$Sex&lt;-factor(data$Sex,
                 ordered = TRUE,
                  levels = c("male","female"))


#Recodifica√ß√£o do n√≠vel 3¬™ classe para valor zero - categoria de base
data$Pclass[data$Pclass==3]&lt;-0
data$Pclass&lt;-factor(data$Pclass)
```

---
# MRLog - Exerc√≠cio

## An√°lise Explorat√≥ria

.pull-left[

```r
data %&gt;% 
 ggplot(aes(x = Survived)) +
  geom_bar()
```
]
.right-graph[

&lt;img src="index_files/figure-html/plot1-label-out-1.png" width="50%" style="display: block; margin: auto;" /&gt;

]

---
# MRLog - Exerc√≠cio

## An√°lise Explorat√≥ria

.pull-left[

```r
data %&gt;% 
  ggplot(aes(x=Survived,fill=Sex))+
  geom_bar(position="fill")+
  scale_fill_manual(values=c("blue","red"))
```
]
.right-graph[

&lt;img src="index_files/figure-html/plot2-label-out-1.png" width="50%" style="display: block; margin: auto;" /&gt;

]

---
# MRLog - Exerc√≠cio

## An√°lise Explorat√≥ria

.pull-left[

```r
data %&gt;% 
  ggplot(aes(x=Survived,fill=Pclass))+
  geom_bar(position="fill")
```
]
.right-graph[

&lt;img src="index_files/figure-html/plot3-label-out-1.png" width="50%" style="display: block; margin: auto;" /&gt;

]


---
# MRLog - Exerc√≠cio

## An√°lise Explorat√≥ria

.pull-left[

```r
data %&gt;% 
 ggplot(aes(x=factor(Survived),y=Age,fill=factor(Survived)))+
  geom_boxplot()
```
]
.right-graph[

&lt;img src="index_files/figure-html/plot4-label-out-1.png" width="50%" style="display: block; margin: auto;" /&gt;

]

---
# MRLog - Exerc√≠cio

.panelset[

.panel[.panel-name[R Code]


```r
#Ajuste do Modelo

m1&lt;-glm(Survived~Sex+Pclass+Age, family = binomial(link="logit"), data=data)
summary(m1)
```

]

.panel[.panel-name[Output]


```

Call:
glm(formula = Survived ~ Sex + Pclass + Age, family = binomial(link = "logit"), 
    data = data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.7303  -0.6780  -0.3953   0.6485   2.4657  

Coefficients:
             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -0.065003   0.227790  -0.285    0.775    
Sex.L        1.783875   0.146648  12.164  &lt; 2e-16 ***
Pclass1      2.580625   0.281442   9.169  &lt; 2e-16 ***
Pclass2      1.270826   0.244048   5.207 1.92e-07 ***
Age         -0.036985   0.007656  -4.831 1.36e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 964.52  on 713  degrees of freedom
Residual deviance: 647.28  on 709  degrees of freedom
AIC: 657.28

Number of Fisher Scoring iterations: 5
```
]

]

---
# Modelo ajustado 
O modelo ajustado √© dado por 

`\(logito = -0.065 + 1.784Sex_F - 2.581PClass_1 + 1.271 PClass_1+ - 0.037Age\)`

--
- Todos os coeficientes estimados das vari√°veis do modelo de pesquisa s√£o estatisticamente significativos e, portanto,diferentes de zero.

--

Efeito das Vari√°veis na ocorr√™ncia do desfecho: Sobreviv√™ncia do Passageiro

|Coeficiente | Sinal | Efeito |
|:----------:|:-----:|:------:|
|Sexo_F | Positivo| Aumenta|
|Class_1| Positivo| Aumenta|
|Class_2| Positivo| Aumenta|
|Idade  | Negativo| Diminui|

--

Lembrando: o valor de `\(B_j\)` representa o efeito no logit `\(p/(1-p)\)`, ou seja, no log da chance de sobreviver em rela√ß√£o a n√£o sobreviver.
---

# MRLog - Exerc√≠cio

## OR e interpreta√ß√£o
.panelset[

.panel[.panel-name[R Code]


```r
exp(cbind(OR=coef(m1),confint(m1)))
```
]

.panel[.panel-name[Output]


```
                    OR     2.5 %     97.5 %
(Intercept)  0.9370645 0.6000403  1.4674914
Sex.L        5.9528821 4.4919878  7.9880676
Pclass1     13.2053931 7.7041808 23.2598689
Pclass2      3.5637952 2.2170845  5.7801843
Age          0.9636903 0.9490535  0.9780124
```
]
.panel[.panel-name[Interpretation]

|Vari√°vel | OR | Interpreta√ß√£o|
|-------|----|--------------|
|Sex_F   | 5.95 | Mulheres possuem chance de sobreviv√™ncia 5,95 vezes maior que homens.
|Pclass1|13,21 | Passageiros da 1¬™ classe possuem chance de sobreviv√™ncia 13,21 vezes maior que chance de sobreviv√™ncia dos passageiros da 3¬™ classe.|
|Pclass2|3,56 | Passageiros da 2¬™ classe possuem chance de sobreviv√™ncia 3,56 vezes maior que chance de sobreviv√™ncia dos passageiros da 3¬™ classe.|
|Age  |0,96 | A cada ano de vida tem-se uma diminui√ß√£o na chance de sobreviv√™ncia na ordem de 0,96.

]
]

---
# Exemplo - C√≥digo R

## Valores preditos

Pode-se ainda obter os valores de probabilidade predita pelo modelo para valores espec√≠ficos da vari√°vel explicativa:


#Probabilidades Preditas


```r
prob&lt;-function(sex,pclass1,pclass2,age)
  { 1 /(1+exp(-(-0.06500312 + (1.78387550*sex) + (2.58062532*pclass1) + 
       (1.27082605*pclass2) + (-0.03698527*age))))
}
```

|Perfil |Probabilidae|
|---------------------------|------------------|
|Mulher ‚Äì 40 anos ‚Äì 1 classe|0.9437517|
|Mulher ‚Äì 40 anos ‚Äì 3 classe|0.559581|
|Homem  ‚Äì 40 anos ‚Äì 1 classe|0.7381183|
|Homem  ‚Äì 40 anos ‚Äì 3 classe|0.1758945|


---
# Exemplo - C√≥digo R

.panelset[
.panel[.panel-name[R Code]


```r
predito&lt;-predict(m1,type="response")
datap&lt;-cbind(data,predito)

datap %&gt;% 
ggplot(aes(x=Age,y=predito,group=Sex,colour=Sex)) +
  geom_line(size = 1) +
  geom_point(size=1) + 
  labs(title = "Probabilidades Preditas",
       y = "Probabilidade", x = "Idade") + 
  scale_color_manual(values=c("cadetblue", "rosybrown1"))+
  facet_wrap(~Pclass,ncol=1 )
```
]

.panel[.panel-name[Plot]

&lt;img src="index_files/figure-html/unnamed-chunk-21-1.png" style="display: block; margin: auto;" /&gt;

]

]
---
# MRLog - Exerc√≠cio


.pull-left[

```r
#ANOVA
anova(m1)
```
]

.right-graph[

```
Analysis of Deviance Table

Model: binomial, link: logit

Response: Survived

Terms added sequentially (first to last)

       Df Deviance Resid. Df Resid. Dev
NULL                     713     964.52
Sex     1  213.816       712     750.70
Pclass  2   78.269       710     672.43
Age     1   25.148       709     647.28
```

]
---

# MRLog - Exerc√≠cio

##### Medidas de Adequa√ß√£o do Modelo

.panelset[

.panel[.panel-name[R Code]


```r
library(blorr)
blorr::blr_model_fit_stats(m1)
```

]

.panel[.panel-name[Output]


```
                              Model Fit Statistics                                
---------------------------------------------------------------------------------
Log-Lik Intercept Only:      -482.258    Log-Lik Full Model:             -323.642 
Deviance(709):                647.283    LR(4):                           317.233 
                                         Prob &gt; LR:                         0.000 
MCFadden's R2                   0.329    McFadden's Adj R2:                 0.319 
ML (Cox-Snell) R2:              0.359    Cragg-Uhler(Nagelkerke) R2:        0.484 
McKelvey &amp; Zavoina's R2:        0.479    Efron's R2:                        0.407 
Count R2:                       0.789    Adj Count R2:                      0.479 
BIC:                          680.138    AIC:                             657.283 
---------------------------------------------------------------------------------
```
]

]

---
# MRLog - Exerc√≠cio

.panelset[

.panel[.panel-name[R Code]


```r
##Estat√≠stica Hosmer and Lemeshow
blorr::blr_test_hosmer_lemeshow(m1)
```

]

.panel[.panel-name[Output]


```
           Partition for the Hosmer &amp; Lemeshow Test            
--------------------------------------------------------------
                        def = 1                 def = 0        
Group    Total    Observed    Expected    Observed    Expected 
--------------------------------------------------------------
  1       77         8          4.49         69        72.51   
  2       73         14         6.50         59        66.50   
  3       69         7          7.66         62        61.34   
  4       68         11        11.01         57        56.99   
  5       71         8         18.46         63        52.54   
  6       70         26        28.32         44        41.68   
  7       72         38        39.38         34        32.62   
  8       72         42        49.19         30        22.81   
  9       70         66        57.86         4         12.14   
 10       72         70        67.13         2          4.87   
--------------------------------------------------------------

     Goodness of Fit Test      
------------------------------
Chi-Square    DF    Pr &gt; ChiSq 
------------------------------
 32.6770      8       1e-04    
------------------------------
```
]

]

---
# MRLog - Exerc√≠cio

.panelset[

.panel[.panel-name[R Code]


```r
## Matriz de Confus√£o

blorr::blr_confusion_matrix(m1)
```

]

.panel[.panel-name[Output]


```
Confusion Matrix and Statistics 

          Reference
Prediction Not survived Survived
         0          356       83
         1           68      207

                Accuracy : 0.7885 
     No Information Rate : 0.5938 

                   Kappa : 0.5580 

McNemars's Test P-Value  : 0.2546 

             Sensitivity : 0.7138 
             Specificity : 0.8396 
          Pos Pred Value : 0.7527 
          Neg Pred Value : 0.8109 
              Prevalence : 0.4062 
          Detection Rate : 0.2899 
    Detection Prevalence : 0.3852 
       Balanced Accuracy : 0.7767 
               Precision : 0.7527 
                  Recall : 0.7138 

        'Positive' Class : 1
```
]

]


---
# MRLog - Exerc√≠cio


#### Curva ROC


.panelset[
  
.panel[.panel-name[R code]


```r
library(pROC)
roc1&lt;- plot.roc(data$Survived,fitted(m1))

plot(roc1,
     print.auc=TRUE,
     auc.polygon=TRUE, 
     auc.polygon.col="lightblue",
     print.thres=TRUE
     )
```
]

.panel[.panel-name[Plot]
&lt;img src="index_files/figure-html/unnamed-chunk-23-1.png" style="display: block; margin: auto;" /&gt;&lt;img src="index_files/figure-html/unnamed-chunk-23-2.png" style="display: block; margin: auto;" /&gt;

]

]
---
# MRLog - Exerc√≠cio

.panelset[
  
.panel[.panel-name[R code]


```r
#Valida√ß√£o por Treinamento e Teste
library(caret)
set.seed(123)
indice &lt;- createDataPartition(data$Survived, p = .80, list = FALSE)

#Aplica√ß√£o do √çndice na base
treinamento &lt;- data[indice, ]
dim(treinamento)
teste &lt;- data[-indice, ]
dim(teste)

#Ajuste do modelo de treinamento

m_train&lt;- glm(Survived~Sex+Pclass+Age, family = binomial(link="logit"), data=treinamento)
summary(m_train)

#Predi√ß√£o da vari√°vel resposta no conjunto de teste
teste$Survived_pred &lt;- predict(m_train, teste, type = "response")
teste$classifica&lt;-ifelse(teste$Survived_pred&gt;0.5,"Survived","Not Survived")

# Visualiza√ß√£o dos valores observados, preditos e classificados
valida&lt;-teste[,c("Survived","Survived_pred","classifica")]
DT::datatable(valida, editable = list(target = 'row'))
```
]

.panel[.panel-name[Output]
<div id="htmlwidget-c43c96a8d8bef7305444" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c43c96a8d8bef7305444">{"x":{"filter":"none","editable":{"target":"row"},"data":[["1","4","7","14","19","24","35","38","39","53","57","81","82","84","85","94","97","98","99","100","113","115","116","117","119","123","126","131","133","135","140","148","157","163","166","174","176","179","180","190","194","209","212","214","221","226","228","243","249","263","266","274","283","284","293","306","309","311","312","324","328","341","342","343","345","354","370","378","380","383","386","391","393","400","406","408","409","438","442","446","447","448","453","461","462","463","468","477","488","494","509","514","516","538","545","551","572","582","583","584","586","600","601","617","619","632","639","646","652","653","662","678","682","690","692","694","711","727","731","732","746","762","768","771","781","788","797","800","805","815","818","819","828","834","836","841","849","851","861","873","880","888"],["Not survived","Survived","Not survived","Not survived","Not survived","Survived","Not survived","Not survived","Not survived","Survived","Survived","Not survived","Survived","Not survived","Survived","Not survived","Not survived","Survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Survived","Survived","Not survived","Survived","Not survived","Not survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Survived","Survived","Survived","Survived","Survived","Not survived","Not survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Survived","Survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Survived","Survived","Not survived","Not survived","Survived","Survived","Survived","Not survived","Survived","Not survived","Not survived","Survived","Survived","Not survived","Not survived","Survived","Survived","Survived","Survived","Not survived","Survived","Survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Survived","Not survived","Not survived","Not survived","Survived","Not survived","Survived","Not survived","Not survived","Not survived","Not survived","Not survived","Survived","Survived"],[0.111775265608433,0.915757618044961,0.36787420418725,0.0748799837587899,0.53191044378364,0.53334683992476,0.53334683992476,0.114378601828445,0.614266466943264,0.883152486600675,0.819730564025734,0.111775265608433,0.0949665455200823,0.53334683992476,0.83456868586376,0.101874299306781,0.272366332978187,0.56546710505245,0.764418158134539,0.221469365259438,0.111775265608433,0.620398731899085,0.114378601828445,0.0344980875864335,0.559078123900544,0.228255904818984,0.140258469994808,0.0864096368263455,0.428609183793071,0.264347487108046,0.559078123900544,0.66794665594925,0.626492786540831,0.101874299306781,0.149914987701371,0.114378601828445,0.122507232911281,0.23988898962347,0.0804565527595327,0.0804565527595327,0.388791195131404,0.626492786540831,0.759711345894003,0.23988898962347,0.128198634336589,0.111775265608433,0.115699968270626,0.244654314532186,0.475009589164771,0.380027984035844,0.212647197483706,0.475009589164771,0.128198634336589,0.119743898858439,0.212647197483706,0.697739031795965,0.23988898962347,0.935330010671904,0.944136310579374,0.815862660741159,0.754940641366303,0.394977402382874,0.935330010671904,0.24948323138947,0.212647197483706,0.104274105737748,0.935330010671904,0.539801763800694,0.119743898858439,0.0884810385627956,0.301159888791525,0.481486956275553,0.0972212437313369,0.791305122526224,0.221469365259438,0.388791195131404,0.114378601828445,0.807934761889959,0.117034582599097,0.680615269602573,0.84841132586915,0.494458197669333,0.520405593420107,0.40477850086371,0.0843822388770947,0.411048013434342,0.355885993893363,0.221469365259438,0.344075805617989,0.272366332978187,0.0972212437313369,0.869078242203417,0.411048013434342,0.925245409752154,0.392334082874588,0.603276065460158,0.872003692785762,0.907393571879156,0.144760198986219,0.481486956275553,0.944136310579374,0.398539904742484,0.807934761889959,0.0843822388770947,0.876080462696764,0.05595931177818,0.467104055414228,0.40477850086371,0.830953497846562,0.114378601828445,0.073101456377156,0.614266466943264,0.539801763800694,0.948104509260459,0.696081567652232,0.104274105737748,0.935330010671904,0.782601651417608,0.927021193770214,0.143418087023928,0.277541244528421,0.0713619135101058,0.535140714179914,0.106723725753493,0.644529156875674,0.153253361656219,0.883152486600675,0.538368039254982,0.0995235864051246,0.0916722399168089,0.235187582507667,0.0679969831620955,0.401197430578353,0.109223875348543,0.907393571879156,0.117034582599097,0.24948323138947,0.167218054753944,0.0713619135101058,0.500947710312181,0.86305692905381,0.942751267796851],["Not Survived","Survived","Not Survived","Not Survived","Survived","Survived","Survived","Not Survived","Survived","Survived","Survived","Not Survived","Not Survived","Survived","Survived","Not Survived","Not Survived","Survived","Survived","Not Survived","Not Survived","Survived","Not Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Survived","Survived","Survived","Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Survived","Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Survived","Not Survived","Survived","Survived","Survived","Not Survived","Not Survived","Survived","Not Survived","Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Not Survived","Survived","Survived","Survived","Survived","Not Survived","Survived","Survived","Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Survived","Not Survived","Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Not Survived","Not Survived","Not Survived","Not Survived","Survived","Survived","Survived"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Survived<\/th>\n      <th>Survived_pred<\/th>\n      <th>classifica<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>

]

]


---
# MRLog - Exerc√≠cio

.panelset[

.panel[.panel-name[R Code]


```r
blorr:: blr_step_aic_both(m1)
```

]

.panel[.panel-name[Output]


```
Stepwise Selection Method 
-------------------------

Candidate Terms: 

1 . Sex 
2 . Pclass 
3 . Age 


Variables Entered/Removed: 

- Sex added 
- Pclass added 
- Age added 
```

```

                    Stepwise Summary                    
------------------------------------------------------
Variable     Method       AIC        BIC      Deviance 
------------------------------------------------------
Sex         addition    754.700    763.842     750.700 
Pclass      addition    680.431    698.714     672.431 
Age         addition    657.283    680.138     647.283 
------------------------------------------------------
```
]

.panel[.panel-name[R Code Plot]


```r
m1 %&gt;%
  blr_step_aic_both() %&gt;%
  plot()
```

]

.panel[.panel-name[Plot]


```
FALSE Stepwise Selection Method 
FALSE -------------------------
FALSE 
FALSE Candidate Terms: 
FALSE 
FALSE 1 . Sex 
FALSE 2 . Pclass 
FALSE 3 . Age 
FALSE 
FALSE 
FALSE Variables Entered/Removed: 
FALSE 
FALSE - Sex added 
FALSE - Pclass added 
FALSE - Age added
```

&lt;img src="index_files/figure-html/step_plot_out-1.png" style="display: block; margin: auto;" /&gt;
]


]

---
# Regress√£o Log√≠stica

## Bom trabalho pessoal!
 
&lt;img src="https://media2.giphy.com/media/QLtO7Hs5FXtJe/giphy-downsized.gif" width="70%" style="display: block; margin: auto;" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
